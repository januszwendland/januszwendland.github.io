"use strict";(self.webpackChunktibia=self.webpackChunktibia||[]).push([[887],{1821:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(8081),s=a.n(l),r=a(3645),n=a.n(r)()(s());n.push([e.id,".ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.balance-green input{border-color:#198754}.balance-orange input{border-color:#fd7e14}.balance-red input{border-color:#dc3545}.loot-transfer{margin:.5rem 0 0}.loot-transfer img{vertical-align:middle;margin:0 0 0 5px;cursor:pointer;transition:transform .3s}.loot-transfer img:hover{transform:scale(1.1)}",""]);const o=n},2641:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"card"},[e._m(0),e._v(" "),a("div",{staticClass:"card-content"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.parseLog.apply(null,arguments)}}},[a("div",{staticClass:"input-group large right"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.log,expression:"log"}],domProps:{value:e.log},on:{input:function(t){t.target.composing||(e.log=t.target.value)}}}),e._v(" "),a("button",[e._v("Split loot")])]),e._v(" "),e._m(1)]),e._v(" "),a("small"),e._v(" "),e.parsed?[a("div",{staticClass:"row row-wrap"},e._l(e.logParsed,(function(t,l){return a("div",{staticClass:"col col-25",class:{"balance-green":t.loot>t.supplies,"balance-orange":t.loot===t.supplies,"balance-red":t.loot<t.supplies}},[a("h3",{staticClass:"mt ellipsis"},[e._v("\n                        "+e._s(t.name)+"\n                        "),a("img",{attrs:{src:"icons/remove.svg",alt:"",width:"24",height:"24",title:"Remove player"},on:{click:function(t){return e.removePlayer(l)}}})]),e._v(" "),a("div",{staticClass:"input-group left mts"},[a("label",{attrs:{for:"loot_"+l}},[e._v("Loot")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.loot,expression:"player.loot",modifiers:{number:!0}}],attrs:{type:"number",id:"loot_"+l},domProps:{value:t.loot},on:{change:e.updateResult,input:function(a){a.target.composing||e.$set(t,"loot",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),a("div",{staticClass:"input-group left mts"},[a("label",{attrs:{for:"supplies_"+l}},[e._v("Supplies")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.supplies,expression:"player.supplies",modifiers:{number:!0}}],attrs:{type:"number",id:"supplies_"+l},domProps:{value:t.supplies},on:{change:e.updateResult,input:function(a){a.target.composing||e.$set(t,"supplies",e._n(a.target.value))},blur:function(t){return e.$forceUpdate()}}})])])})),0),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"mt"},e._l(e.transfer,(function(t){return a("p",{staticClass:"loot-transfer"},[a("strong",[e._v(e._s(t.from))]),e._v(" should transfer "),a("strong",[e._v(e._s(e.formatNumber(t.gold)))]),e._v(" gp to "),a("strong",[e._v(e._s(t.to))]),e._v(".\n                    "),a("img",{attrs:{src:"icons/copy.svg",alt:"",width:"24",height:"24",title:"transfer "+t.gold+" to "+t.to},on:{click:function(a){return e.copyToClipboard("transfer "+t.gold+" to "+t.to)}}})])})),0),e._v(" "),e._m(3),e._v(" "),a("div",{staticClass:"row mt"},[a("div",{staticClass:"col"},[a("div",{staticClass:"badge",class:{green:e.teamBalance>0,orange:0===e.teamBalance,red:e.teamBalance<0}},[e._v("\n                        Team balance\n                        "),a("span",[e._v(e._s(e.formatNumber(e.teamBalance)))])])]),e._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"badge",class:{green:e.playerBalance>0,orange:0===e.playerBalance,red:e.playerBalance<0}},[e._v("\n                        Each player balance\n                        "),a("span",[e._v(e._s(e.formatNumber(e.playerBalance)))])])])])]:e._e()],2)])};l._withStripped=!0;const s={name:"Loot",data:function(){return{log:"",logParsed:[],parsed:!1,teamSize:0,teamBalance:0,playerBalance:0,transfer:[]}},methods:{parseLog:function(){let e=this.log.split("\n"),t=/\d+/g;e.splice(0,6),this.teamSize=e.length/6,this.teamBalance=0,this.logParsed=[],this.transfer=[];for(let a=0;a<this.teamSize;a++){let l=e[6*a].replace(" (Leader)",""),s=parseInt(e[6*a+1].replaceAll(",","").match(t)),r=parseInt(e[6*a+2].replaceAll(",","").match(t)),n=s-r;this.logParsed.push({name:l,loot:s,supplies:r,balance:n}),this.teamBalance=this.teamBalance+s-r}this.playerBalance=Math.floor(this.teamBalance/this.teamSize),isNaN(this.playerBalance)&&(this.playerBalance=0),this.transferFromTo(),this.parsed=!0},updateResult:function(){this.teamBalance=0,this.logParsed.forEach((e=>{this.teamBalance=this.teamBalance+parseInt(e.loot)-parseInt(e.supplies),e.balance=parseInt(e.loot)-parseInt(e.supplies)})),this.playerBalance=Math.floor(this.teamBalance/this.teamSize),isNaN(this.playerBalance)&&(this.playerBalance=0),this.transferFromTo()},removePlayer:function(e){this.logParsed.splice(e,1),this.teamSize--,this.updateResult()},transferFromTo:function(){let e=this;e.transfer=[],e.logParsed.forEach(((t,a)=>{if(t.balance>e.playerBalance){let l=Math.abs(t.balance-e.playerBalance),s=a;e.logParsed.forEach(((t,a)=>{if(l>0&&t.balance<e.playerBalance){let a=Math.abs(t.balance-e.playerBalance),r=0;a<l?(r=a,l-=a):(r=l,l=0),t.balance+=r,e.logParsed[s].balance-=r,e.transfer.push({from:e.logParsed[s].name,to:t.name,gold:r})}}))}}))},copyToClipboard:function(e){let t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(t)}},formatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}};var r=a(3379),n=a.n(r),o=a(7795),i=a.n(o),c=a(569),p=a.n(c),u=a(3565),m=a.n(u),d=a(9216),v=a.n(d),f=a(4589),g=a.n(f),h=a(1821),_={};_.styleTagTransform=g(),_.setAttributes=m(),_.insert=p().bind(null,"head"),_.domAPI=i(),_.insertStyleElement=v(),n()(h.Z,_),h.Z&&h.Z.locals&&h.Z.locals;var b=(0,a(1900).Z)(s,l,[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-header"},[a("h2",{staticClass:"card-title"},[a("img",{attrs:{src:"icons/loot.svg",alt:"",width:"18",height:"18"}}),e._v("\n            Party loot splitter\n        ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("small",[e._v("Copy "),a("strong",[e._v("entire")]),e._v(" log from Party Hunt Analyser. Application "),a("strong",[e._v("do not")]),e._v(" store or validate pasted log.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mts"},[a("small",[e._v("\n                    You can edit values in text fields."),a("br"),e._v("\n                    You can remove player by clicking on '"),a("strong",[e._v("x")]),e._v("' icon.\n                ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mts"},[a("small",[e._v("\n                    You can copy '"),a("strong",[e._v("transfer [amount] to [name]")]),e._v("' by clicking on icon after text.\n                ")])])}],!1,null,null,null);b.options.__file="src/js/components/Loot.vue";const y=b.exports}}]);