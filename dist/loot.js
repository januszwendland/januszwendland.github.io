"use strict";(self.webpackChunktibia=self.webpackChunktibia||[]).push([[887],{4517:(e,a,l)=>{l.d(a,{Z:()=>s});var t=l(8081),n=l.n(t),o=l(3645),r=l.n(o)()(n());r.push([e.id,".ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.balance-green input{border-color:#198754}.balance-orange input{border-color:#fd7e14}.balance-red input{border-color:#dc3545}.loot-transfer{margin:.5rem 0 0}.loot-transfer img{vertical-align:middle;margin:0 0 0 5px;cursor:pointer;transition:transform .3s}.loot-transfer img:hover{transform:scale(1.1)}",""]);const s=r},8348:(e,a,l)=>{l.r(a),l.d(a,{default:()=>J});var t=l(5166);const n={class:"card"},o=(0,t._)("div",{class:"card-header"},[(0,t._)("h2",{class:"card-title"},[(0,t._)("img",{src:"icons/loot.svg",alt:"",width:"18",height:"18"}),(0,t.Uk)(" Party loot splitter ")])],-1),r={class:"card-content"},s={class:"input-group large right"},i=(0,t._)("button",null,"Split loot",-1),c=(0,t._)("small",null,[(0,t.Uk)("Copy "),(0,t._)("strong",null,"entire"),(0,t.Uk)(" log from Party Hunt Analyser. Application "),(0,t._)("strong",null,"do not"),(0,t.Uk)(" store or validate pasted log.")],-1),p=(0,t._)("small",null,null,-1),d={class:"row row-wrap"},u={class:"mt ellipsis"},m=["onClick"],g={class:"input-group left mts"},h=["for"],f=["id","onUpdate:modelValue"],b={class:"input-group left mts"},_=["for"],y=["id","onUpdate:modelValue"],v=(0,t._)("div",{class:"mts"},[(0,t._)("small",null,[(0,t.Uk)(" You can edit values in text fields."),(0,t._)("br"),(0,t.Uk)(" You can remove player by clicking on '"),(0,t._)("strong",null,"x"),(0,t.Uk)("' icon. ")])],-1),w={class:"mt"},B={class:"loot-transfer"},k=(0,t.Uk)(" should transfer "),U=(0,t.Uk)(" gp to "),C=(0,t.Uk)(". "),P=["title","onClick"],z=(0,t._)("div",{class:"mts"},[(0,t._)("small",null,[(0,t.Uk)(" You can copy '"),(0,t._)("strong",null,"transfer [amount] to [name]"),(0,t.Uk)("' by clicking on icon after text. ")])],-1),S={class:"row mt"},x={class:"col"},N=(0,t.Uk)(" Team balance "),T={class:"col"},I=(0,t.Uk)(" Each player balance "),R={name:"Loot",data:function(){return{log:"",logParsed:[],parsed:!1,teamSize:0,teamBalance:0,playerBalance:0,transfer:[]}},methods:{parseLog:function(){let e=this.log.split("\n"),a=/\d+/g;e.splice(0,6),this.teamSize=e.length/6,this.teamBalance=0,this.logParsed=[],this.transfer=[];for(let l=0;l<this.teamSize;l++){let t=e[6*l].replace(" (Leader)",""),n=parseInt(e[6*l+1].replaceAll(",","").match(a)),o=parseInt(e[6*l+2].replaceAll(",","").match(a)),r=n-o;this.logParsed.push({name:t,loot:n,supplies:o,balance:r}),this.teamBalance=this.teamBalance+n-o}this.playerBalance=Math.floor(this.teamBalance/this.teamSize),isNaN(this.playerBalance)&&(this.playerBalance=0),this.transferFromTo(),this.parsed=!0},updateResult:function(){this.teamBalance=0,this.logParsed.forEach((e=>{this.teamBalance=this.teamBalance+parseInt(e.loot)-parseInt(e.supplies),e.balance=parseInt(e.loot)-parseInt(e.supplies)})),this.playerBalance=Math.floor(this.teamBalance/this.teamSize),isNaN(this.playerBalance)&&(this.playerBalance=0),this.transferFromTo()},removePlayer:function(e){this.logParsed.splice(e,1),this.teamSize--,this.updateResult()},transferFromTo:function(){let e=this;e.transfer=[],e.logParsed.forEach(((a,l)=>{if(a.balance>e.playerBalance){let t=Math.abs(a.balance-e.playerBalance),n=l;e.logParsed.forEach(((a,l)=>{if(t>0&&a.balance<e.playerBalance){let l=Math.abs(a.balance-e.playerBalance),o=0;l<t?(o=l,t-=l):(o=t,t=0),a.balance+=o,e.logParsed[n].balance-=o,e.transfer.push({from:e.logParsed[n].name,to:a.name,gold:o})}}))}}))},copyToClipboard:function(e){let a=document.createElement("textarea");a.textContent=e,a.style.position="fixed",document.body.appendChild(a),a.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(a)}},formatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}};var A=l(3379),D=l.n(A),E=l(7795),L=l.n(E),Y=l(569),Z=l.n(Y),M=l(3565),V=l.n(M),H=l(9216),F=l.n(H),K=l(4589),q=l.n(K),j=l(4517),G={};G.styleTagTransform=q(),G.setAttributes=V(),G.insert=Z().bind(null,"head"),G.domAPI=L(),G.insertStyleElement=F(),D()(j.Z,G),j.Z&&j.Z.locals&&j.Z.locals;const J=(0,l(3744).Z)(R,[["render",function(e,a,l,R,A,D){return(0,t.wg)(),(0,t.iD)("article",n,[o,(0,t._)("div",r,[(0,t._)("form",{onSubmit:a[1]||(a[1]=(0,t.iM)(((...e)=>D.parseLog&&D.parseLog(...e)),["prevent"]))},[(0,t._)("div",s,[(0,t.wy)((0,t._)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.log=a)},null,512),[[t.nr,e.log]]),i]),c],32),p,e.parsed?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("div",d,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.logParsed,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{class:(0,t.C_)(["col col-25",{"balance-green":e.loot>e.supplies,"balance-orange":e.loot===e.supplies,"balance-red":e.loot<e.supplies}])},[(0,t._)("h3",u,[(0,t.Uk)((0,t.zw)(e.name)+" ",1),(0,t._)("img",{src:"icons/remove.svg",alt:"",width:"24",height:"24",title:"Remove player",onClick:e=>D.removePlayer(l)},null,8,m)]),(0,t._)("div",g,[(0,t._)("label",{for:"loot_"+l},"Loot",8,h),(0,t.wy)((0,t._)("input",{type:"number",id:"loot_"+l,"onUpdate:modelValue":a=>e.loot=a,onChange:a[2]||(a[2]=(...e)=>D.updateResult&&D.updateResult(...e))},null,40,f),[[t.nr,e.loot,void 0,{number:!0}]])]),(0,t._)("div",b,[(0,t._)("label",{for:"supplies_"+l},"Supplies",8,_),(0,t.wy)((0,t._)("input",{type:"number",id:"supplies_"+l,"onUpdate:modelValue":a=>e.supplies=a,onChange:a[3]||(a[3]=(...e)=>D.updateResult&&D.updateResult(...e))},null,40,y),[[t.nr,e.supplies,void 0,{number:!0}]])])],2)))),256))]),v,(0,t._)("div",w,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.transfer,(e=>((0,t.wg)(),(0,t.iD)("p",B,[(0,t._)("strong",null,(0,t.zw)(e.from),1),k,(0,t._)("strong",null,(0,t.zw)(D.formatNumber(e.gold)),1),U,(0,t._)("strong",null,(0,t.zw)(e.to),1),C,(0,t._)("img",{src:"icons/copy.svg",alt:"",width:"24",height:"24",title:"transfer "+e.gold+" to "+e.to,onClick:a=>D.copyToClipboard("transfer "+e.gold+" to "+e.to)},null,8,P)])))),256))]),z,(0,t._)("div",S,[(0,t._)("div",x,[(0,t._)("div",{class:(0,t.C_)(["badge",{green:e.teamBalance>0,orange:0===e.teamBalance,red:e.teamBalance<0}])},[N,(0,t._)("span",null,(0,t.zw)(D.formatNumber(e.teamBalance)),1)],2)]),(0,t._)("div",T,[(0,t._)("div",{class:(0,t.C_)(["badge",{green:e.playerBalance>0,orange:0===e.playerBalance,red:e.playerBalance<0}])},[I,(0,t._)("span",null,(0,t.zw)(D.formatNumber(e.playerBalance)),1)],2)])])],64)):(0,t.kq)("v-if",!0)])])}]])}}]);